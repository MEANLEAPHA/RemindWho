<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RemindWho Update Friend Task</title>
<link rel="icon" href="img/remindWho2-removebg-preview.png">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
        <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous"> -->
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
             <script src="https://kit.fontawesome.com/ec7a51a641.js" crossorigin="anonymous"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/solid.js" integrity="sha384-tzzSw1/Vo+0N5UhStP3bvwWPq+uvzCMfrN1fEFe+xBmv1C/AtVX5K0uZtmcHitFZ" crossorigin="anonymous"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/fontawesome.js" integrity="sha384-6OIrr52G08NpOFSZdxxz1xdNSndlD4vdcf/q2myIUVO0VsqaGHJsB0RaBE01VTOY" crossorigin="anonymous"></script>
        <!-- font -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400..700&family=Tagesschrift&family=Reenie+Beanie&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="asset/css/remindMyFriendUpdate.css">
</head>
<body>
    <header >
           <a href="index.html"><img src="img/remindWho-removebg-preview.png" alt="RimindWho" id="logo"></a>

            <nav>
                <ul>
                   <li><a href="index.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Home </a> <span style="color: rgb(10, 89, 145);"> / </span> </li>
                    <li><a href="aboutus.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>About Us</a> <span style="color: rgb(10, 89, 145);"> / </span> </li>
                    <li><a href="howtouse.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>How to use </a> <span style="color: rgb(10, 89, 145);"> / </span> </li>
                    <li><a href="policy.html"  style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Privacy Policy </a> <span style="color: rgb(10, 89, 145);"> / </span> </li>
                    <li><a href="report.html"  style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Reports </a> <span style="color: rgb(10, 89, 145);"> / </span> </li>
                    <li><a href="feedback.html"  style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Feedback </a> <span style="color: rgb(10, 89, 145);"> / </span> </li>
                    <li id='liLogin'><div id="login"><a id="liveToastBtn"><img src="img/logout-sketch.png" width="17px"></a></div></li>
                </ul>
            </nav>
              <div class="dropdown">
                  <div style="border: none;background: none;margin-bottom: 2px;" class="btn "  data-bs-toggle="dropdown" aria-expanded="false"><img src="img/menuBar.png" alt="menu" style="color: rgb(73, 73, 73);opacity: 0.7;width: 25px;margin-bottom: 2px;" ></div> 

  <ul class="dropdown-menu dropdown-menu-light">
    <li><a class="dropdown-item " href="index.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Home</a></li>
          <li><a class="dropdown-item " href="aboutus.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>About Us</a></li>
    <li><a class="dropdown-item " href="howtouse.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>How to use</a></li>
    <li><a class="dropdown-item" href="policy.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Privacy Policy </a></li>
     <li><a class="dropdown-item" href="report.html" style='color:  rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Reports  </a></li>
     <li><a class="dropdown-item" href="feedback.html" style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Feedback </a></li>
    <li><hr class="dropdown-divider"></li>
    <li ><a class="dropdown-item"  style='color: rgb(60, 60, 60);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;' id="liveToastBtn2"><img src="img/logout-sketch.png" width="17px"> Log out</a></li>
  </ul>
</div>

      </header>
   <nav aria-label="breadcrumb" style="width: 90%;margin: auto; margin-top: 15px;">
  <ol class="breadcrumb"  style="background: none;">
    <li class="breadcrumb-item"><a href="index.html" style='color: gray;font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'>Home</a></li>
    <li class="breadcrumb-item " aria-current="page"><a href="remindMyFriendUpdate.html" style='color: rgb(10, 89, 145);font-family: "Reenie Beanie", cursive;font-weight: 599;font-size: large;'> <u>Update My Friend Task</u></a></li>
  </ol>
</nav>
<div class="message" id="msg" style="margin: auto;;font-size: small;text-align: center;"></div>
<div class="container">
  <div class="card">
 <h3 class="text-center mb-4"><a style="color: tomato;"><u>Update My Friend Task</u></a></h3>
    <form id="task-form">
      <input type="hidden" id="taskId">
      
      <div class="mb-3">
        <label class="form-label">Task Title</label>
        <input type="text" class="form-control" id="NoteTitle" required>
      </div>
        <div class="mb-3" style="display: none;">
                <label class="form-label">To</label>
                <input type="text" class="form-control" id="toWho" value="Friend">
            </div>

      <!-- <div class="mb-3">
        <label class="form-label">User ID</label>
        <input type="number" class="form-control" id="userId" required>
      </div>

             <div class="mb-3">
                <label class="form-label">User Email</label>
                <input type="email" class="form-control" id="userEmail" placeholder="Enter user Email" required>
            </div> -->

      <div class="mb-3">
        <label class="form-label">Description</label>
        <textarea class="form-control" rows="3" id="description" required></textarea>
      </div>
          <div class="mb-3">
                <label class="form-label">Friend's Email</label>
                <input type="email" class="form-control" rows="3" id="fEmail" placeholder="Enter email you want to remind" required>
            </div>

      <div class="row">
        <div class="col-lg-6">
          <label class="form-label">Category</label>
          <select class="form-select" id="cate" required>
            <option value="reading">Reading</option>
            <option value="study">Study</option>
            <option value="work">Work</option>
            <option value="social">Social</option>
            <option value="entertainment">Entertainment</option>
            <option value="business">Business</option>
            <option value="important">Important</option>
            <option value="urgent">Urgent</option>
          </select>
        </div>
        <div class="col-lg-6">
          <label class="form-label">Priority</label>
          <select class="form-select" id="priority" required>
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
        </div>
      </div>


       <div class="row mt-3">
             <!-- <div class="col-lg-6">
                           <div style="display: flex;align-items: center;padding: 2px 0px 0px 0px;"><label class="form-label">Start Time | </label> <div class="toggle-switch" style="padding: 7px 0px 0px 0px;">
           <span> <span>| </span>Remind Me</span>
          <input type="checkbox" id="startStatus">
                    <label for="StartStatus"></label>
        </div></div>
                    <input type="datetime-local" class="form-control" id="startAt" required>
                </div> -->

                 <div class="col-lg-6">
                           <div style="display: flex;align-items: center;padding: 2px 0px 0px 0px;"><label class="form-label">Start Time | </label> <div class="toggle-switch" style="padding: 7px 0px 0px 0px;">
           <span> <span>| </span>Remind Me</span>
          <input type="checkbox" id="startStatus">
                    <label for="startStatus"></label>
        </div></div>
                    <input type="datetime-local" class="form-control" id="startAt">
                </div>

                <div class="col-lg-6">
                           <div style="display: flex;align-items: center;padding: 2px 0px 0px 0px;"><label class="form-label">Deadline | </label> <div class="toggle-switch" style="padding: 7px 0px 0px 0px;">
           <span> <span>| </span>Remind Me</span>
          <input type="checkbox" id="deadlineStatus">
                    <label for="deadlineStatus"></label>
        </div></div>
                    <input type="datetime-local" class="form-control" id="EndAt" >
                </div>

            </div>

      <!-- <div class="row mt-3">
        <div class="col-lg-6">
          <label class="form-label">Start Time</label>
          <input type="datetime-local" class="form-control" id="startAt" required>
        </div>
        <div class="col-lg-6">
          <label class="form-label">Deadline</label>
          <input type="datetime-local" class="form-control" id="EndAt" required>
        </div>
      </div> -->
<!-- 
      <div class="mt-3">
        <div class="toggle-switch">
          <span>Remind Me</span>
          <input type="checkbox" id="startStatus">
          <label for="startStatus"></label>
        </div>

        <div class="toggle-switch">
          <span>Remind Me</span>
          <input type="checkbox" id="deadlineStatus">
          <label for="deadlineStatus"></label>
        </div> -->

           <button type="submit" class="btn  mt-4" style="background:  tomato;color: white;">Update Task</button>
      </div>

   
    </form>
     <br>
        <div class="alert alert-warning" role="alert" style="font-size: x-small;">
Turn on the 'Remind Friend' button to send your friend a reminder email at the start time and deadline you select. Please note that the time you choose is based on your own time zone, not your friend's.
</div>
  </div>


<!-- <script>
  $(document).ready(function () {
    const taskId = new URLSearchParams(window.location.search).get('id');

    $.ajax({
      url: `http://localhost:3000/ToDo/readwell/filter/${taskId}`,
      method: 'GET',
            headers: {
            'Authorization': 'Bearer ' + localStorage.getItem('token')  // ← Token added here
        },
      success: function (response) {
        const task = response.task[0];

        $('#taskId').val(taskId);
        $('#NoteTitle').val(task.title);
        // $('#userId').val(task.member_id);
        // $('#userEmail').val(task.user_email);
        $('#description').val(task.description);
        $('#cate').val(task.task_name.toLowerCase());
        $('#priority').val(task.priority.toLowerCase());
        $('#startAt').val(new Date(task.start_time).toISOString().slice(0, 16));
        $('#EndAt').val(new Date(task.deadline_time).toISOString().slice(0, 16));
        $('#startStatus').prop('checked', task.start_status === 'active');
        $('#deadlineStatus').prop('checked', task.deadline_status === 'active');
      }
    });

    $('#task-form').on('submit', function (e) {
      e.preventDefault();
      const updatedTask = {
        // member_id: $('#userId').val(),
        // member_email: $('#userEmail').val(),
        title: $('#NoteTitle').val(),
        description: $('#description').val(),
        task_name: $('#cate').val(),
        priority: $('#priority').val(),
        start_time: $('#startAt').val(),
        deadline_time: $('#EndAt').val(),
        start_status: $('#startStatus').is(':checked') ? 'active' : 'inactive',
        deadline_status: $('#deadlineStatus').is(':checked') ? 'active' : 'inactive',
      };

      $.ajax({
        url: `http://localhost:3000/ToDo/readwell/update/${taskId}`,
        method: 'PUT',
              headers: {
            'Authorization': 'Bearer ' + localStorage.getItem('token')  // ← Token added here
        },
        contentType: 'application/json',
        data: JSON.stringify(updatedTask),
        success: function (response) {
          alert(response.message);
          location.reload();
        }
      });
    });
  });
</script> -->
  <div class="toast-container position-fixed top-0 end-0 p-3">
  <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" >
    <div class="toast-header">
        Are you sure you want to logout?<img src="img/noidea.gif" width="25px">
      
    </div>
    <div class="toast-body">
       <button style="border: none;background: rgb(77, 103, 253);padding: 2px 6px 2px 6px;" onclick="logout()">Yes</button>
    <button type="button"  data-bs-dismiss="toast" aria-label="Close" style="border: none;background: rgb(253, 77, 77);padding: 2px 6px 2px 6px;">No</button>
    </div>

  </div>
</div>
 <div class="toast-container position-fixed top-0 end-0 p-3">
  <div id="liveToast2" class="toast" role="alert" aria-live="assertive" aria-atomic="true" >
    <div class="toast-header">
        Are you sure you want to logout?<img src="img/noidea.gif" width="25px">
      
    </div>
    <div class="toast-body">
       <button style="border: none;background: rgb(77, 103, 253);padding: 2px 6px 2px 6px;" onclick="logout()">Yes</button>
    <button type="button"  data-bs-dismiss="toast" aria-label="Close" style="border: none;background: rgb(253, 77, 77);padding: 2px 6px 2px 6px;">No</button>
    </div>

  </div>
</div>
<script src="asset/js/jquery.js"></script>
<script src="asset/js/remindMyFriendUpdate.js"></script>
<script src="asset/js/logout.js"></script>


</body>
</html>
